{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/DB/composite-index/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>복합 인덱스 경우에 따라 타는지 궁금?</h2>\n<p>3개 컬럼 이상을 복합 인덱스를 설정했을 때 쿼리문 Case(경우)에 따라 인덱스를 타는지 안 타는지 궁금해서 실제로 직접 해보면서 확인 해보려고 합니다.</p>\n<h2>TEST할 간단한 테이블 &#x26; 복합 인덱스</h2>\n<table>\n<thead>\n<tr>\n<th>Column Name</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>학생 id (primary key)</td>\n</tr>\n<tr>\n<td>name</td>\n<td>학생 이름</td>\n</tr>\n<tr>\n<td>department</td>\n<td>학과</td>\n</tr>\n<tr>\n<td>email</td>\n<td>이메일</td>\n</tr>\n<tr>\n<td>age</td>\n<td>나이</td>\n</tr>\n<tr>\n<td>grade</td>\n<td>학년</td>\n</tr>\n</tbody>\n</table>\n<p>간단히 테스트할 예시로 학생 테이블이 있고, (department, age, grade)로 복합 인덱스를 설정하였다.\r\n<img src=\"/6f4c552b5ced84034dd2da3669cdbe6e/students-table.jpg\" alt=\"students-table.JPG\">\r\n<img src=\"/32be4a8841a231a3ad4be0db238bdfc8/composite-index1.jpg\" alt=\"composite-index1.JPG\"></p>\n<h2>Case에 따라 인덱스 타는지 확인</h2>\n<p>WHERE 문에 복합 인덱스에 설정한 컬럼들의 조합을 하나씩 실행해보면서 EXPLAIN 확인해보았다.</p>\n<h3>1. WHERE문에 department, age, grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span> <span class=\"token operator\">AND</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-department-age-grade.JPG\" src=\"/97f6aacae69f71fcf6ba38763ca7e595/explain-department-age-grade.jpg\" width=\"150\">\n<p>index 타는 것 확인!!</p>\n<h3>2. WHERE문에 department, age 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-department-age.JPG\" src=\"/1803715f45cc6e4d823bf2f0e91e8d27/explain-department-age.jpg\" width=\"150\">\n<p>index 타는 것 확인!!</p>\n<h3>3. WHERE문에 department, grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-department-grade.JPG\" src=\"/0f015935f3263a1ee06e2e584e73ccfb/explain-department-grade.jpg\" width=\"150\">\n<p>index 타는 것 확인!!</p>\n<h3>4. WHERE문에 age, grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span> <span class=\"token operator\">AND</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-age-grade.JPG\" src=\"/dd3572f6991577e185a6bfd070bb7ede/explain-age-grade.jpg\" width=\"150\">\n<p>index 타지 않는 것 확인!!</p>\n<h3>5. WHERE문에 department 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-department.JPG\" src=\"/436fd22abef74b2fca16c1cbc96c2daa/explain-department.jpg\" width=\"150\">\n<p>index 타는 것 확인!!</p>\n<h3>6. WHERE문에 age 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-age.JPG\" src=\"/75fdfc1d92545375f86156198a55ba84/explain-age.jpg\" width=\"150\">\n<p>index 타지 않는 것 확인!!</p>\n<h3>7. WHERE문에 grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<img alt=\"explain-grade.JPG\" src=\"/9926311e6a5a583d85c8fd2cae67a650/explain-grade.jpg\" width=\"150\">\n<p>index 타지 않는 것 확인!!</p>\n<h2>왜 이런 결과가 나올까?</h2>\n<h3>인덱스에 대해서</h3>\n<p>인덱스란 추가적인 저장 공간을 활용하여 DB 테이블의 검색 속도를 향상시키기 위한 자료구조(주로 B+ Tree, B Tree) 입니다.</p>\n<img alt=\"composite-index2.JPG\" src=\"/2440d53c4082d1f9716d4652bdb8afdc/composite-index2.jpg\" width=\"250\">\n<p>즉, 복합인덱스를 생성할 때, 컬럼 순서에 의존하여 인덱스 KEY도 영향을 받게 됩니다.</p>\n<h2>결론</h2>\n<h3>복합인덱스 생성시 배치된 컬럼들의 순서에 의존</h3>\n<p>복합인덱스의 두 번째 컬럼은 첫 번째 컬럼에 의존해서 정렬되어있는 것처럼 만약 3개 이상의 컬럼으로 복합인덱스를 생성하면 나머지 컬럼들도 두 번째 컬럼이 첫 번째 컬럼에 의존하는 것처럼 세 번째 컬럼은 두 번째 컬럼에, 네 번째 컬럼은 세 번째 컬럼에 의존합니다.</p>\n<h3>복합인덱스 컬럼 선정 순서의 중요성</h3>\n<p>복합인덱스를 생성할 때, 컬럼 순서에 따라 완전히 다른 인덱스가 되며 성능 차이도 천차만별이 됩니다. 그래서 복합인덱스 구성 시 선택성이 좋은 컬럼을 앞으로 구성하는 것이 좋습니다.</p>\n<p><strong>내가 아는 지식으로 실험하고 정리한 글이기에 틀린 부분이 있을수 있습니다.<br>\r\n피드백은 언제나 환영입니다.</strong></p>","frontmatter":{"title":"복합 인덱스","summary":"복합 인덱스","date":"2022.10.11.","categories":["DB"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQAGCf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe1J+/KCJ6P/xAAaEAEBAQEAAwAAAAAAAAAAAAAEAwIBBRMj/9oACAEBAAEFAipl7NKagMtfM19WnPXF+PBPiTf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAmEAACAgICAQEJAAAAAAAAAAABAgMRBBIAITITBSIjQlFhYrHB/9oACAEBAAY/AsoweyJMSRMedosiYoFkZWdatGleJW6NlditHUrreQclWdhNiarimVTfqQ7qokjjMka9mSjrNFvIteASo8cAKvWPp6PiPD+/lfMsuqfCeSMairUJfvd/quZMk0cbFWdtSC6EwaypayF/n7PI5X6Y7LSBVUBGKChr9F7+/P/EABoQAQEBAQEBAQAAAAAAAAAAAAERIQAxQVH/2gAIAQEAAT8hMYAgfEmZGoBL4tEaQXsEGBRs8ZZhmF6WMS1UPx4ctqWQ+lV8VY8jvR7gHIm3/Al+R3krUSFI1TB1qXLO/9oADAMBAAIAAwAAABDTz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQEBAQEAAAAAAAAAAAAAAAERIQBB/9oACAEBAAE/EBPBgVBhH7HdOfWIb0VAdNSe/gmty6BssVAIC4uIRrRUpiKCAOSKao+C0A1oGMEWen5+t+0RYAP/2Q=="},"images":{"fallback":{"src":"/static/2440d53c4082d1f9716d4652bdb8afdc/6c7c9/composite-index2.jpg","srcSet":"/static/2440d53c4082d1f9716d4652bdb8afdc/dd607/composite-index2.jpg 258w,\n/static/2440d53c4082d1f9716d4652bdb8afdc/2a61b/composite-index2.jpg 517w,\n/static/2440d53c4082d1f9716d4652bdb8afdc/6c7c9/composite-index2.jpg 1033w","sizes":"(min-width: 1033px) 1033px, 100vw"},"sources":[{"srcSet":"/static/2440d53c4082d1f9716d4652bdb8afdc/21ea6/composite-index2.webp 258w,\n/static/2440d53c4082d1f9716d4652bdb8afdc/94463/composite-index2.webp 517w,\n/static/2440d53c4082d1f9716d4652bdb8afdc/07ec2/composite-index2.webp 1033w","type":"image/webp","sizes":"(min-width: 1033px) 1033px, 100vw"}]},"width":1033,"height":613}},"publicURL":"/static/2440d53c4082d1f9716d4652bdb8afdc/composite-index2.JPG"}}}}]}},"pageContext":{"slug":"/DB/composite-index/"}},
    "staticQueryHashes": []}