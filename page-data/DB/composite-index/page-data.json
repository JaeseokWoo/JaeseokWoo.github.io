{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/DB/composite-index/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>복합 인덱스 경우에 따라 타는지 궁금?</h2>\n<p>3개 컬럼 이상을 복합 인덱스를 설정했을 때 쿼리문 Case(경우)에 따라 인덱스를 타는지 안 타는지 궁금해서 실제로 직접 해보면서 확인 해보려고 합니다.</p>\n<h2>TEST할 간단한 테이블 &#x26; 복합 인덱스</h2>\n<table>\n<thead>\n<tr>\n<th>Column Name</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>id</td>\n<td>학생 id (primary key)</td>\n</tr>\n<tr>\n<td>name</td>\n<td>학생 이름</td>\n</tr>\n<tr>\n<td>department</td>\n<td>학과</td>\n</tr>\n<tr>\n<td>email</td>\n<td>이메일</td>\n</tr>\n<tr>\n<td>age</td>\n<td>나이</td>\n</tr>\n<tr>\n<td>grade</td>\n<td>학년</td>\n</tr>\n</tbody>\n</table>\n<p>간단히 테스트할 예시로 학생 테이블이 있고, (department, age, grade)로 복합 인덱스를 설정하였다.\r\n<img src=\"/6f4c552b5ced84034dd2da3669cdbe6e/students-table.jpg\" alt=\"students-table.JPG\">\r\n<img src=\"/32be4a8841a231a3ad4be0db238bdfc8/composite-index(1).jpg\" alt=\"composite-index(1).JPG\"></p>\n<h2>Case에 따라 인덱스 타는지 확인</h2>\n<p>WHERE 문에 복합 인덱스에 설정한 컬럼들의 조합을 하나씩 실행해보면서 EXPLAIN 확인해보았다.</p>\n<h3>1. WHERE문에 department, age, grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span> <span class=\"token operator\">AND</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/97f6aacae69f71fcf6ba38763ca7e595/explain-department-age-grade.jpg\" alt=\"explain-department-age-grade.JPG\"></p>\n<p>index 타는 것 확인!!</p>\n<h3>2. WHERE문에 department, age 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/1803715f45cc6e4d823bf2f0e91e8d27/explain-department-age.jpg\" alt=\"explain-department-age.JPG\"></p>\n<p>index 타는 것 확인!!</p>\n<h3>3. WHERE문에 department, grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">AND</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/0f015935f3263a1ee06e2e584e73ccfb/explain-department-grade.jpg\" alt=\"explain-department-grade.JPG\"></p>\n<p>index 타는 것 확인!!</p>\n<h3>4. WHERE문에 age, grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span> <span class=\"token operator\">AND</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/dd3572f6991577e185a6bfd070bb7ede/explain-age-grade.jpg\" alt=\"explain-age-grade.JPG\"></p>\n<p>index 타지 않는 것 확인!!</p>\n<h3>5. WHERE문에 department 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> department <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Mathematics'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Computer Engineering'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/436fd22abef74b2fca16c1cbc96c2daa/explain-department.jpg\" alt=\"explain-department.JPG\"></p>\n<p>index 타는 것 확인!!</p>\n<h3>6. WHERE문에 age 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> age <span class=\"token operator\">></span> <span class=\"token number\">22</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/75fdfc1d92545375f86156198a55ba84/explain-age.jpg\" alt=\"explain-age.JPG\"></p>\n<p>index 타지 않는 것 확인!!</p>\n<h3>7. WHERE문에 grade 있는 경우</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> index_test<span class=\"token punctuation\">.</span>students\r\n<span class=\"token keyword\">WHERE</span> grade <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/9926311e6a5a583d85c8fd2cae67a650/explain-grade.jpg\" alt=\"explain-grade.JPG\"></p>\n<p>index 타지 않는 것 확인!!</p>\n<h2>왜 이런 결과가 나올까?</h2>\n<h3>인덱스에 대해서</h3>\n<p>인덱스란 추가적인 저장 공간을 활용하여 DB 테이블의 검색 속도를 향상시키기 위한 자료구조 입니다.</p>\n<h2>복합인덱스 컬럼 선정 순서의 중요성</h2>\n<p>복함인덱스를 생성할 때, 컬럼 순서에 따라 완전히 다른 인덱스가 되며 성능차이도 천차만별이 됩니다. 그래서 복합인덱스 구성시 선택성이 좋은 컬럼을 앞으로 구성하는 것이 좋습니다.</p>\n<p>컬럼순서에 따라 완전히 다른 인덱스가되며 성능차이도 천차만별이다.\r\n컬럼순서는 복합인덱스 구성의 가장 중요한 요소\r\n쿼리성능 테스트에는 항상 버퍼캐시를 비우고 실행해본다.</p>","frontmatter":{"title":"복합 인덱스","summary":"복합 인덱스","date":"2022.03.27.","categories":["DB"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAoBBQgJ/8QAFwEAAwEAAAAAAAAAAAAAAAAAAgMEBf/aAAwDAQACEAMQAAAByzYsDxW/gWM+h53/xAAZEAACAwEAAAAAAAAAAAAAAAABBgADBQT/2gAIAQEAAQUCqRHM1BGdBAkus72jQ5ty9q0adyf/xAAiEQACAQMCBwAAAAAAAAAAAAABAgMABBIUIgUREyEjUVL/2gAIAQMBAT8BXhM02nPVTz28sqZFu0douJVtp3YqAgHMeyK0q/Rr/8QAIhEAAQEGBwAAAAAAAAAAAAAAAQIAERIUITEiI0FSU5GS/9oACAECAQE/AZwojwDLgJryuId6rbW7Tytiey3/xAArEAACAAQEBAUFAAAAAAAAAAABAgMEBhIFERMhABQiMRAVJjI2UYGRldT/2gAIAQEABj8CQNSNVI4ZmPpjFGPVkLdQQRmvTmAQbWLb5HLgW0lVLD6mnsUh/bJoB/PHxGp/0eJfz8eXJDltE1FhWFXMJnU5adl4EWKdpkIIoZzYwh2ge5G3JTDFhymgall8ILMkdo3KxpPXZruYt1g/Z7LbdrD38P/EABwQAQADAAIDAAAAAAAAAAAAAAEAESExQWGR0f/aAAgBAQABPyHoLQiNr1jOjFJfCtQD5E1nKm5SlACr1CvNr28AWZFnudoBOxrIAkg479v2f//aAAwDAQACAAMAAAAQEx//xAAbEQEAAgIDAAAAAAAAAAAAAAABESExcZHB8P/aAAgBAwEBPxC/dQhTYGITogDPJbeAO9+z/8QAGREAAgMBAAAAAAAAAAAAAAAAAREhMUEA/9oACAECAQE/EF660FJzAcs9imjzH//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQWGB8P/aAAgBAQABPxAXi8gaB5RY43gfOiuDUcbAqCwBYsrbJMNg6OH71Kq7fgBz2L9VhQUXaezbKs4iIVsk3//Z"},"images":{"fallback":{"src":"/static/bf90f977940a4291a099bae9365a7083/01ca8/my-blog.jpg","srcSet":"/static/bf90f977940a4291a099bae9365a7083/26174/my-blog.jpg 318w,\n/static/bf90f977940a4291a099bae9365a7083/c1cbe/my-blog.jpg 635w,\n/static/bf90f977940a4291a099bae9365a7083/01ca8/my-blog.jpg 1270w","sizes":"(min-width: 1270px) 1270px, 100vw"},"sources":[{"srcSet":"/static/bf90f977940a4291a099bae9365a7083/b83a3/my-blog.webp 318w,\n/static/bf90f977940a4291a099bae9365a7083/51720/my-blog.webp 635w,\n/static/bf90f977940a4291a099bae9365a7083/550d8/my-blog.webp 1270w","type":"image/webp","sizes":"(min-width: 1270px) 1270px, 100vw"}]},"width":1270,"height":793}},"publicURL":"/static/bf90f977940a4291a099bae9365a7083/my-blog.JPG"}}}}]}},"pageContext":{"slug":"/DB/composite-index/"}},
    "staticQueryHashes": []}